"use strict";const btn=document.querySelector(".btn-search"),input=document.querySelector(".js-input"),characterListEl=document.querySelector(".js-list"),favoritesListEl=document.querySelector(".js-list-favorites"),resetButton=document.querySelector(".btn-reset"),buttonLog=document.querySelector(".btn-log");let allCharacters=[],favoriteCharacters=[];function renderOneCharacter(e,r){let t="";t=-1===favoriteCharacters.findIndex(r=>r.char_id===parseInt(e.char_id))?"":"selected";let a=`<li>\n  <article class="article ${t}" id="${e.char_id}">\n  `;return!0===r&&(a+=`<i class="fa-solid fa-circle-xmark icon" id="${e.char_id}"></i>`),a+=`<img\n      src=${e.img} class="characterPhoto">\n    <h3 class="characterName">${e.name}</h3>\n    <p class="characterNickname">${e.nickname}</p>\n    <p class="characterStatus">${e.status}</p>\n  </article>\n  </li>`,a}function renderAllCharacters(e){let r="";for(let t=0;t<e.length;t++)r+=renderOneCharacter(e[t],!1);characterListEl.innerHTML=r;const t=document.querySelectorAll(".article");for(const e of t)e.addEventListener("click",keepFavoritesArray)}function renderFavoritesCharacters(){let e="";for(let r=0;r<favoriteCharacters.length;r++)e+=renderOneCharacter(favoriteCharacters[r],!0);favoritesListEl.innerHTML=e;const r=document.querySelectorAll(".icon");for(let e=0;e<r.length;e++)r[e].addEventListener("click",e=>{const r=favoriteCharacters.findIndex(r=>r.char_id===parseInt(e.currentTarget.id));favoriteCharacters.splice(r,1),localStorage.setItem("favCharacter",JSON.stringify(favoriteCharacters)),renderFavoritesCharacters()})}function keepFavoritesArray(e){e.currentTarget.classList.toggle("selected");const r=allCharacters.find(r=>r.char_id===parseInt(e.currentTarget.id)),t=favoriteCharacters.findIndex(r=>r.char_id===parseInt(e.currentTarget.id));-1===t?(favoriteCharacters.push(r),localStorage.setItem("favCharacter",JSON.stringify(favoriteCharacters))):(favoriteCharacters.splice(t,1),localStorage.setItem("favCharacter",JSON.stringify(favoriteCharacters))),renderFavoritesCharacters()}function getData(){fetch("./assets/data/characters.json").then(e=>e.json()).then(e=>{allCharacters=e,renderAllCharacters(allCharacters),renderFavoritesCharacters()})}function savedLocalStorage(){const e=JSON.parse(localStorage.getItem("favCharacter"));null!==e&&(favoriteCharacters=e,renderFavoritesCharacters())}function searchButton(){const e=input.value.toLowerCase();renderAllCharacters(allCharacters.filter(r=>r.name.toLowerCase().includes(e)))}function handleReset(){localStorage.removeItem("favCharacter"),favoriteCharacters.length=0,renderFavoritesCharacters()}getData(),savedLocalStorage(),btn.addEventListener("click",e=>{e.preventDefault(),searchButton()}),resetButton.addEventListener("click",e=>{e.preventDefault(),handleReset()}),buttonLog.addEventListener("click",e=>{e.preventDefault()});